<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PitchDesk - My Profile</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <div class="logo-icon">P</div>
                <h2>PitchDesk</h2>
            </div>

            <div class="nav-center">
                <div class="search-container">
                    <input type="text" placeholder="Search startup ideas..." class="search-input" id="searchInput">
                    <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.35-4.35"></path>
                    </svg>
                </div>
            </div>

            <div class="nav-actions">
                <button class="btn-post-idea" id="postIdeaBtn">
                    <span>+</span>
                    Post Idea
                </button>
                <div class="credits-badge">
                    <span class="credits-count" id="creditsCount">{{ current_user.credits }}</span>
                    <span class="credits-label">Credits</span>
                </div>
                <button class="icon-btn notification-btn" aria-label="Notifications">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9z"></path>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                    </svg>
                </button>
                <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
                    <svg class="theme-icon sun-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                    <svg class="theme-icon moon-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                </button>
                <div class="profile-menu">
                    <button class="profile-btn" id="profileBtn">
                        <div class="profile-avatar">{{ current_user.username[0].upper() }}</div>
                    </button>
                    <div class="profile-dropdown" id="profileDropdown">
                        <div class="profile-header">
                            <div class="profile-avatar large">{{ current_user.username[0].upper() }}</div>
                            <div class="profile-info">
                                <h4>{{ current_user.username }}</h4>
                                <p>{{ current_user.role.title() }}</p>
                            </div>
                        </div>
                        <div class="profile-menu-items">
                            <a href="/profile" class="profile-menu-item active">My Profile</a>
                            <a href="/bookmarks" class="profile-menu-item">Bookmarks</a>
                            <a href="/settings" class="profile-menu-item">Settings</a>
                            {% if current_user.role == 'admin' %}
                            <a href="/admin" class="profile-menu-item admin-only">Admin Panel</a>
                            {% endif %}
                            <div class="profile-menu-divider"></div>
                            <a href="/logout" class="profile-menu-item logout-btn">Logout</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Profile Header -->
    <section class="profile-header-section">
        <div class="profile-container">
            <div class="profile-header-card">
                <div class="profile-avatar-section">
                    <div class="profile-avatar-xl" id="profileAvatar">{{ current_user.username[0].upper() }}</div>
                    <button class="btn btn-secondary" id="changeAvatarBtn">Change Avatar</button>
                </div>
                <div class="profile-info-section">
                    <h1 id="profileName">{{ current_user.username }}</h1>
                    <p class="profile-role">{{ current_user.role.title() }}</p>
                    <p class="profile-email">{{ current_user.email }}</p>
                    <div class="profile-stats">
                        <div class="profile-stat">
                            <span class="stat-number">{{ current_user.credits }}</span>
                            <span class="stat-label">Credits</span>
                        </div>
                        <div class="profile-stat">
                            <span class="stat-number" id="ideasCount">0</span>
                            <span class="stat-label">Ideas Posted</span>
                        </div>
                        <div class="profile-stat">
                            <span class="stat-number" id="bookmarksCount">0</span>
                            <span class="stat-label">Bookmarks</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Profile Content -->
    <main class="profile-content">
        <div class="profile-container">
            <div class="profile-tabs">
                <button class="profile-tab active" data-tab="overview">Overview</button>
                <button class="profile-tab" data-tab="portfolio">Portfolio</button>
                <button class="profile-tab" data-tab="applications">Applications</button>
                <button class="profile-tab" data-tab="activity">Activity</button>
            </div>

            <!-- Overview Tab -->
            <div class="profile-tab-content active" id="overviewTab">
                <div class="profile-section">
                    <h3>About</h3>
                    <form class="profile-form" id="profileForm">
                        <div class="form-group">
                            <label for="profileBio">Bio</label>
                            <textarea id="profileBio" placeholder="Tell us about yourself..." rows="4">{{ current_user.bio }}</textarea>
                        </div>
                        <div class="form-group">
                            <label for="linkedinUrl">LinkedIn Profile</label>
                            <input type="url" id="linkedinUrl" placeholder="https://linkedin.com/in/username" value="{{ current_user.linkedin }}">
                        </div>
                        <button type="submit" class="btn btn-primary">Save Changes</button>
                    </form>
                </div>

                <div class="profile-section">
                    <h3>My Recent Ideas</h3>
                    <div class="ideas-list" id="myIdeasList">
                        <!-- Ideas will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- Portfolio Tab -->
            <div class="profile-tab-content" id="portfolioTab">
                <div class="profile-section">
                    <h3>Portfolio & Documents</h3>
                    <div class="upload-section">
                        <div class="upload-card">
                            <h4>Resume/CV</h4>
                            <p>Upload your resume to apply for internships</p>
                            <input type="file" id="resumeUpload" accept=".pdf,.doc,.docx" hidden>
                            <button class="btn btn-secondary" onclick="document.getElementById('resumeUpload').click()">
                                Upload Resume
                            </button>
                            <div class="upload-status" id="resumeStatus">
                                {% if current_user.portfolio_pdf %}
                                <p class="file-uploaded">📄 {{ current_user.portfolio_pdf }}</p>
                                {% else %}
                                <p class="no-file">No resume uploaded</p>
                                {% endif %}
                            </div>
                        </div>

                        <div class="upload-card">
                            <h4>Portfolio PDF</h4>
                            <p>Showcase your work and projects</p>
                            <input type="file" id="portfolioUpload" accept=".pdf" hidden>
                            <button class="btn btn-secondary" onclick="document.getElementById('portfolioUpload').click()">
                                Upload Portfolio
                            </button>
                            <div class="upload-status" id="portfolioStatus">
                                <p class="no-file">No portfolio uploaded</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="profile-section">
                    <h3>Skills & Technologies</h3>
                    <div class="skills-section">
                        <div class="skills-input">
                            <input type="text" id="skillInput" placeholder="Add a skill...">
                            <button class="btn btn-primary" id="addSkillBtn">Add</button>
                        </div>
                        <div class="skills-tags" id="skillsTags">
                            <!-- Skills will be added here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Applications Tab -->
            <div class="profile-tab-content" id="applicationsTab">
                <div class="profile-section">
                    <h3>Internship Applications</h3>
                    <div class="applications-list" id="applicationsList">
                        <div class="application-item">
                            <div class="application-info">
                                <h4>Sustainable Energy Management System</h4>
                                <p>Applied on January 15, 2024</p>
                                <span class="application-status pending">Pending Review</span>
                            </div>
                            <div class="application-actions">
                                <button class="btn btn-secondary">View Details</button>
                            </div>
                        </div>
                        <div class="application-item">
                            <div class="application-info">
                                <h4>Campus Food Delivery App</h4>
                                <p>Applied on January 10, 2024</p>
                                <span class="application-status accepted">Accepted</span>
                            </div>
                            <div class="application-actions">
                                <button class="btn btn-primary">Start Internship</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Activity Tab -->
            <div class="profile-tab-content" id="activityTab">
                <div class="profile-section">
                    <h3>Recent Activity</h3>
                    <div class="activity-feed" id="activityFeed">
                        <div class="activity-item">
                            <div class="activity-icon vote">👍</div>
                            <div class="activity-content">
                                <p>You upvoted <strong>Sustainable Energy Management</strong></p>
                                <span class="activity-time">2 hours ago</span>
                            </div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon bookmark">🔖</div>
                            <div class="activity-content">
                                <p>You bookmarked <strong>AI Study Assistant</strong></p>
                                <span class="activity-time">1 day ago</span>
                            </div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon idea">💡</div>
                            <div class="activity-content">
                                <p>You posted a new idea <strong>Smart Parking System</strong></p>
                                <span class="activity-time">3 days ago</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
